<!DOCTYPE HTML>
<html>
<head>
</head>
  <link href="http://vjs.zencdn.net/c/video-js.css" rel="stylesheet">
  <script src="http://vjs.zencdn.net/c/video.js"></script>
  <script src="http://cdn.sockjs.org/sockjs-0.3.2.min.js"></script>
<body>

  <h4>
  <table width="1px" border="0" cellspacing="0" cellpadding="0" align="">
  <tbody>
    <tr>
       <td>
         <video id="video" class="video-js vjs-default-skin" controls
         preload="auto" width="640" height="264" poster="my_video_poster.png"
         data-setup="{}">
         </video>
       </td>
    </tr>
    <tr>
       <td bgcolor="#FFFF99" align="center"><font color="#000080"><b><div id='output'>Film name.</div></b></font></td>
    </tr>
  </tbody>
  </table>
  </h4>
  <div id='torrent' style="display: none;">%torrent%</div> 


  <script>
    function refresh(text) {
	document.getElementById('output').innerHTML = text;
    }

    var is_webm_support = supports_webm_video();
    _V_("video").ready(function()
    {
          var first = true;
          var myPlayer = this;
          var hide_play_message = false;
	  var time = 0;
	  myPlayer.addEvent("play", function()
  	  {
	    if(first == true)
	    {
	      first = false;
	      //myPlayer.src({ type: "video/webm", src: "http://localhost:6878/get_http_video?file=KKK.webm" });
	      myPlayer.src({ type: "video/webm", src: "http://107.21.203.144:8888/Volk.webm" });
              myPlayer.play();
          }
	    else
	    {
	      if(hide_play_message == false) refresh('Playing ...');
	    }
	  });

	  myPlayer.addEvent("loadstart", function()
	  {
	    hide_play_message = true;
            refresh('Prepare to start ...');
	  });

	  myPlayer.addEvent("loadeddata", function()
	  {
	    hide_play_message = false;
	    refresh('Playing ...');
	    myPlayer.pause();
	    myPlayer.currentTime(180);
	    myPlayer.play();
	  });

	  myPlayer.addEvent("pause", function()
	  {
	    refresh('Pause ...');
	  });

	  myPlayer.addEvent("ended", function()
	  {
	    refresh('Ended !!!');
	  });

	  myPlayer.addEvent("error", function()
	  {
	    refresh('Error !!!');
	    myPlayer.src({ type: "video/webm", src: "http://107.22.233.233:6878/KKK.webm" });
	    myPlayer.currentTime(time);

            myPlayer.play();

	  });

	  myPlayer.addEvent("timeupdate", function()
	  {
	    time = myPlayer.currentTime();
	  });

    });

    function supports_video() {
      return !!document.createElement('video').canPlayType;
    }

    function supports_webm_video() {
      if (!supports_video()) { return false; }
      var v = document.createElement("video");
      return v.canPlayType('video/webm; codecs="vp8, vorbis"');
    }

</script>  
</body>
</html>
